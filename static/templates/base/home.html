<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∫–æ–∫—Ç–µ–π–ª–µ–π</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles/base/styles.css">
</head>
<body>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ö–µ–¥–µ—Ä -->
<div id="header"></div>

<div class="container">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∞–π–¥–±–∞—Ä -->
    <div id="sidebar"></div>

    <main class="content">
        <div class="section">
            <div class="text">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∫–æ–∫—Ç–µ–π–ª–µ–π!</h2>
                <p>–≠—Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –ª—é–±–∏—Ç–µ–ª–∏ –∫–æ–∫—Ç–µ–π–ª–µ–π –º–æ–≥—É—Ç –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –ª—é–±–∏–º—ã–º–∏ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ –∏–¥–µ–∏ –∏ –æ–±—â–∞—Ç—å—Å—è —Å –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏.</p>
            </div>
            <div class="image-container">
                <img id="randomImage1" src="" alt="–ö–æ–∫—Ç–µ–π–ª—å">
            </div>
        </div>

        <div class="section">
            <div class="text">
                <h2>–ß—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å?</h2>
                <ul>
                    <li>üë• –û–±—â–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –∏–¥–µ—è–º–∏.</li>
                    <li>üçπ –î–æ–±–∞–≤–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –∫–æ–∫—Ç–µ–π–ª–µ–π —Å —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º.</li>
                    <li>‚ù§Ô∏è –õ–∞–π–∫–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–∏—Å—å.</li>
                    <li>üí¨ –û—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –æ–±—Å—É–∂–¥–∞—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –∏ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è.</li>
                    <li>‚≠ê –û—Ü–µ–Ω–∏–≤–∞—Ç—å –∫–æ–∫—Ç–µ–π–ª–∏ –æ—Ç 0 –¥–æ 10 –±–∞–ª–ª–æ–≤, –ø–æ–º–æ–≥–∞—è –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–∞–π—Ç–∏ –ª—É—á—à–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã.</li>
                </ul>
            </div>
            <div class="image-container">
                <img id="randomImage2" src="" alt="–ö–æ–∫—Ç–µ–π–ª—å">
            </div>
        </div>
    </main>
</div>

<script>
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ (AJAX)
    fetch("/static/templates/base/header.html")
        .then(response => response.text())
        .then(data => document.getElementById("header").innerHTML = data);

    fetch("/static/templates/base/sidebar.html")
        .then(response => response.text())
        .then(data => document.getElementById("sidebar").innerHTML = data);

    document.addEventListener("DOMContentLoaded", function () {
        let images = [
            "/static/images/general/home/home1.png",
            "/static/images/general/home/home2.png",
            "/static/images/general/home/home3.png",
            "/static/images/general/home/home4.png",
            "/static/images/general/home/home5.png",
            "/static/images/general/home/home6.png",
        ];

        document.getElementById("randomImage1").src = images[Math.floor(Math.random() * images.length)];
        document.getElementById("randomImage2").src = images[Math.floor(Math.random() * images.length)];
    });

    document.addEventListener("DOMContentLoaded", function () {
        const logoutLink = document.querySelector('a[href="/login/"]');

        if (logoutLink) {
            logoutLink.addEventListener("click", async function (event) {
                event.preventDefault(); // –û—Ç–º–µ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏

                try {
                    const response = await fetch("/api/logout/", {
                        method: "POST",
                        credentials: "include", // –í–∫–ª—é—á–∞–µ–º –∫—É–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
                        headers: {
                            "X-CSRFToken": getCSRFToken() // –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CSRF –∑–∞—â–∏—Ç–∞
                        }
                    });

                    if (response.ok) {
                        window.location.href = "/login/"; // –†–µ–¥–∏—Ä–µ–∫—Ç –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—ã—Ö–æ–¥–µ
                    } else {
                        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:", response.status);
                    }
                } catch (error) {
                    console.error("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:", error);
                }
            });
        }

        function getCSRFToken() {
            const match = document.cookie.match(/csrftoken=([^;]+)/);
            return match ? match[1] : "";
        }
    });
</script>
</body>
</html>
